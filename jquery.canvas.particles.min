$.fn.particles=function(e){var t=2*Math.PI,n=1e3/60,r={amount:10,stop:!1,end:"change",dir:{x:1,y:1,xrand:!0,yrand:!0,rand:!0,xfunction:function(e,t,n,r,i,s,o){return t+=e*i},yfunction:function(e,n,r,i,s,o,u){return i+=Math.sin(t*(n/o))*r*s}},image:!1,radius:{radius:5,random:!1,min:3},duration:{duration:1e4,random:!1,min:1e3,firststep:-2e3},speed:{speed:1,random:!1,min:.2},opacity:{opacity:1,random:!1,min:0,animation:!0,decay:!0},position:{x:0,y:0,random:!1},color:{color:{r:255,g:255,b:255},random:!1,min:{r:0,g:0,b:0}},layout:"before",bound:"back"},i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,n)}}(),s=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||function(e){clearTimeout(e)}}(),o={init:function(e){e=$.extend(!0,{},r,e||{});return this.each(function(){var t=$(this),n=$.extend({},e),r,i,s;n.image&&(s=n.image,n.image=new Image,n.image.src=s);n.part=[];n.canvas={width:t.width(),height:t.height()};r=$("<canvas class='particles' width='"+n.canvas.width+"' height='"+n.canvas.height+"'></canvas>");n.layout=="before"?t.append(r):n.layout=="after"&&t.prepend(r);i=r.get(0).getContext("2d");n.canvas.ctx=i;n.canvas.object=r;this.parts=n;r={r:n.position.random,x:n.position.x,y:n.position.y,w:n.canvas.width,h:n.canvas.height,p:n.radius,G:n.radius.radius-n.radius.min,d:n.duration,A:n.duration.duration-n.duration.min,s:n.speed,H:n.speed.speed-n.speed.min,a:n.opacity,o:n.opacity.opacity-n.opacity.min,c:n.color,m:{r:n.color.color.r-n.color.min.r,g:n.color.color.g-n.color.min.g,b:n.color.color.b-n.color.min.b}};for(var u=0;u<n.amount;u++)i=Math.random(),t.particles("add",{position:{x:r.r?parseInt(Math.random()*r.w):r.x,y:r.r?parseInt(Math.random()*r.h):r.y},radius:{radius:r.p.random?Math.random()*r.G+r.p.min:r.p.radius},duration:{duration:r.d.random?parseInt(Math.random()*r.A)+r.d.min:r.d.duration},speed:{speed:r.s.random?Math.random()*r.H+r.s.min:r.s.speed},opacity:{opacity:r.a.random?Math.random()*r.o+r.a.min:r.a.opacity},color:{color:r.c.random?{r:parseInt(i*r.m.r+r.c.min.r),g:parseInt(i*r.m.g+r.c.min.g),b:parseInt(i*r.m.b+r.c.min.b)}:r.c.color}});o.step.apply(t)})},add:function(e){return this.each(function(){var r=this.parts,i,s,o,u,a,f,l,c,h,d,v,m,g,y,b,w;i={color:$.extend(!0,{},r.color,e.color||{}),duration:$.extend(!0,{},r.duration,e.duration||{}),end:e.end?e.end:r.end,image:e.image?e.image:r.image,opacity:$.extend(!0,{},r.opacity,e.opacity||{}),radius:$.extend(!0,{},r.radius,e.radius||{}),speed:$.extend(!0,{},r.speed,e.speed||{}),position:$.extend(!0,{},r.position,e.position||{}),dir:$.extend(!0,{},r.dir,e.dir||{}),bound:e.bound?e.bound:r.bound,alpha:0};s=function(){i.dir.x=i.dir.xrand?parseInt(Math.random()*2)==0?Math.random()+.1:Math.random()*-1-.1:i.dir.x;i.dir.y=i.dir.yrand?parseInt(Math.random()*2)==0?Math.random()+.1:Math.random()*-1-.1:i.dir.y};i.image&&!i.image.src&&(u=i.image,i.image=new Image,i.image.src=u);a=i.position;f=i.duration;l=i.radius;c=i.opacity;h=i.speed;d=i.color;a=e.position&&e.position.random?{x:parseInt(Math.random()*r.canvas.width),y:parseInt(Math.random()*r.canvas.height),random:!0}:a;f.duration=parseInt(f.duration/n);f.firststep=parseInt(f.firststep/n);f.min=parseInt(f.min/n);i.step=f.firststep;s();v=f.duration/2;m=parseInt(r.duration.min/n);g=r.radius.radius-r.radius.min;y=r.speed.speed-r.speed.min;b=r.opacity.opacity-r.opacity.min;w=parseInt(r.duration.duration/n)-m;i.update=function(){i.step>=f.duration?(i.step=f.firststep,i.end=="remove"?i.r=!0:i.end=="change"&&(s(),o=Math.random(),f.duration=f.random?parseInt(Math.random()*w)+m:f.duration,l.radius=l.random?Math.random()*g+r.radius.min:l.radius,h.speed=h.random?Math.random()*y+r.speed.min:h.speed,c.opacity=c.random?Math.random()*b+r.opacity.min:c.opacity,d.color=d.random?{r:parseInt(o*(r.color.color.r-r.color.min.r)+r.color.min.r),g:parseInt(o*(r.color.color.g-r.color.min.g)+r.color.min.g),b:parseInt(o*(r.color.color.b-r.color.min.b)+r.color.min.b)}:d.color,v=f.duration/2)):i.dir.rand&&i.step>0&&i.step%60==0&&Math.floor(2*Math.random())==1&&s();i.alpha=c.animation?c.decay?i.step<v?i.step/v*c.opacity:(f.duration-i.step)/v*c.opacity:i.alpha<c.opacity-.1?i.step/f.duration*c.opacity:c.opacity:c.opacity;i.alpha=i.alpha<0?0:i.alpha;a.x=i.dir.xfunction(i.dir.x,a.x,i.dir.y,a.y,h.speed,r.canvas.width,r.canvas.height,i.step);a.y=i.dir.yfunction(i.dir.x,a.x,i.dir.y,a.y,h.speed,r.canvas.width,r.canvas.height,i.step);i.bound=="back"?(a.x=a.x>r.canvas.width+l.radius+2?-l.radius:a.x<-l.radius-2?r.canvas.width+l.radius:a.x,a.y=!i.image?a.y>r.canvas.height+l.radius+2?-l.radius:a.y<-l.radius-2?r.canvas.height+l.radius:a.y:a.y>r.canvas.height+l.radius*i.image.height/i.image.width+2?-l.radius*i.image.height/i.image.width:a.y<-l.radius*i.image.height/i.image.width+2?r.canvas.height+l.radius*i.image.height/i.image.width:a.y):i.bound=="bounce"&&((a.x+l.radius>=r.canvas.width?(a.x+=-h.speed,i.dir.x=-1):a.x<=l.radius&&(a.x+=h.speed,i.dir.x=1),!i.image)?a.y+l.radius>=r.canvas.height?(a.y+=-h.speed,i.dir.y=-1):a.y<=l.radius&&(a.y+=h.speed,i.dir.y=1):a.y+l.radius*i.image.height/i.image.width>=r.canvas.height?(a.y+=-h.speed,i.dir.y=-1):a.y<=l.radius*i.image.height/i.image.width&&(a.y+=h.speed,i.dir.y=1));i.image?(r.canvas.ctx.save(),r.canvas.ctx.translate(a.x,a.y),r.canvas.ctx.globalAlpha=i.alpha,r.canvas.ctx.drawImage(i.image,-l.radius,-l.radius*i.image.height/i.image.width,l.radius*2,l.radius*2*i.image.height/i.image.width),r.canvas.ctx.restore()):(r.canvas.ctx.beginPath(),r.canvas.ctx.arc(a.x,a.y,l.radius,0,t,!1),r.canvas.ctx.fillStyle="rgba("+d.color.r+","+d.color.g+","+d.color.b+","+i.alpha+")",r.canvas.ctx.fill());i.step++};r.part.push(i)})},stop:function(){return this.each(function(){var e=this;e.parts.stop==!1?(e.parts.stop=!0,s(e.parts.requestid)):(e.parts.stop=!1,o.step.apply($(e)))})},step:function(){return this.each(function(){var e=this,t;e.parts&&e.parts.stop==!1&&(t=[],e.parts.canvas.ctx.clearRect(0,0,e.parts.canvas.width,e.parts.canvas.height),$.each(e.parts.part,function(e,n){n.update();n.r||t.push(n)}),e.parts.part=t,e.parts.requestid=i(function(){o.step.apply($(e))}))})},destroy:function(){return this.each(function(){var e=this;o["stop"].apply($(e));e.parts.canvas.object.remove();delete e.parts})}};if(o[e]){return o[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return o.init.apply(this,arguments)}else{$.error("Method "+e+" does not exist on jQuery.particles")}}
