(function(e,t,n){e.fn.particles=function(n){var r=2*Math.PI,i=1e3/60,s={amount:10,stop:!1,end:"change",dir:{x:1,y:1,xrand:!0,yrand:!0,rand:!0,xfunction:function(e,t,n,r,i,s,o){return t+=e*i},yfunction:function(e,t,n,i,s,o,u){return i+=Math.sin(r*(t/o))*n*s}},image:!1,radius:{radius:5,random:!1,min:3},duration:{duration:1e4,random:!1,min:1e3,firststep:-2e3},speed:{speed:1,random:!1,min:.2},opacity:{opacity:1,random:!1,min:0,animation:!0,decay:!0},position:{x:0,y:0,random:!1},color:{color:{r:255,g:255,b:255},random:!1,min:{r:0,g:0,b:0}},layout:"before",bound:"back",create:!1,addParticle:!1,stateChange:!1,removeParticle:!1},o=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,i)}}(),u=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||function(e){clearTimeout(e)}}(),a={init:function(t){t=e.extend(!0,{},s,t||{});return this.each(function(){var n=e(this),r=e.extend({},t),i,s,o;r.image&&(o=r.image,r.image=new Image,r.image.src=o);r.part=[];r.canvas={width:n.width(),height:n.height()};i=e("<canvas class='particles' width='"+r.canvas.width+"' height='"+r.canvas.height+"'></canvas>");r.layout=="before"?n.append(i):r.layout=="after"&&n.prepend(i);s=i.get(0).getContext("2d");r.canvas.ctx=s;r.canvas.object=i;this.parts=r;i={r:r.position.random,x:r.position.x,y:r.position.y,w:r.canvas.width,h:r.canvas.height,p:r.radius,G:r.radius.radius-r.radius.min,d:r.duration,A:r.duration.duration-r.duration.min,s:r.speed,H:r.speed.speed-r.speed.min,a:r.opacity,o:r.opacity.opacity-r.opacity.min,c:r.color,m:{r:r.color.color.r-r.color.min.r,g:r.color.color.g-r.color.min.g,b:r.color.color.b-r.color.min.b}};for(var u=0;u<r.amount;u++)s=Math.random(),n.particles("add",{position:{x:i.r?parseInt(Math.random()*i.w):i.x,y:i.r?parseInt(Math.random()*i.h):i.y},radius:{radius:i.p.random?Math.random()*i.G+i.p.min:i.p.radius},duration:{duration:i.d.random?parseInt(Math.random()*i.A)+i.d.min:i.d.duration},speed:{speed:i.s.random?Math.random()*i.H+i.s.min:i.s.speed},opacity:{opacity:i.a.random?Math.random()*i.o+i.a.min:i.a.opacity},color:{color:i.c.random?{r:parseInt(s*i.m.r+i.c.min.r),g:parseInt(s*i.m.g+i.c.min.g),b:parseInt(s*i.m.b+i.c.min.b)}:i.c.color}});e.isFunction(r.create)&&n.off("create.particles").on("create.particles",r.create);n.trigger("create");a.step.apply(n)})},add:function(t){return this.each(function(){var n=this,s=n.parts,o,u,a,f,l,c,h,d,v,m,g,y,b,w,E,S;o={color:e.extend(!0,{},s.color,t.color||{}),duration:e.extend(!0,{},s.duration,t.duration||{}),end:t.end?t.end:s.end,image:t.image?t.image:s.image,opacity:e.extend(!0,{},s.opacity,t.opacity||{}),radius:e.extend(!0,{},s.radius,t.radius||{}),speed:e.extend(!0,{},s.speed,t.speed||{}),position:e.extend(!0,{},s.position,t.position||{}),dir:e.extend(!0,{},s.dir,t.dir||{}),bound:t.bound?t.bound:s.bound,alpha:0};u=function(){o.dir.x=o.dir.xrand?parseInt(Math.random()*2)==0?Math.random()+.1:Math.random()*-1-.1:o.dir.x;o.dir.y=o.dir.yrand?parseInt(Math.random()*2)==0?Math.random()+.1:Math.random()*-1-.1:o.dir.y};o.image&&!o.image.src&&(f=o.image,o.image=new Image,o.image.src=f);l=o.position;c=o.duration;h=o.radius;d=o.opacity;v=o.speed;m=o.color;l=t.position&&t.position.random?{x:parseInt(Math.random()*s.canvas.width),y:parseInt(Math.random()*s.canvas.height),random:!0}:l;c.duration=parseInt(c.duration/i);c.firststep=parseInt(c.firststep/i);c.min=parseInt(c.min/i);o.step=c.firststep;u();g=c.duration/2;y=parseInt(s.duration.min/i);b=s.radius.radius-s.radius.min;w=s.speed.speed-s.speed.min;E=s.opacity.opacity-s.opacity.min;S=parseInt(s.duration.duration/i)-y;o.update=function(){o.step>=c.duration?(o.step=c.firststep,o.end=="remove"?o.r=!0:o.end=="change"&&(u(),a=Math.random(),c.duration=c.random?parseInt(Math.random()*S)+y:c.duration,h.radius=h.random?Math.random()*b+s.radius.min:h.radius,v.speed=v.random?Math.random()*w+s.speed.min:v.speed,d.opacity=d.random?Math.random()*E+s.opacity.min:d.opacity,m.color=m.random?{r:parseInt(a*(s.color.color.r-s.color.min.r)+s.color.min.r),g:parseInt(a*(s.color.color.g-s.color.min.g)+s.color.min.g),b:parseInt(a*(s.color.color.b-s.color.min.b)+s.color.min.b)}:m.color,g=c.duration/2)):o.dir.rand&&o.step>0&&o.step%60==0&&Math.floor(2*Math.random())==1&&u();o.alpha=d.animation?d.decay?o.step<g?o.step/g*d.opacity:(c.duration-o.step)/g*d.opacity:o.alpha<d.opacity-.1?o.step/c.duration*d.opacity:d.opacity:d.opacity;o.alpha=o.alpha<0?0:o.alpha;l.x=o.dir.xfunction(o.dir.x,l.x,o.dir.y,l.y,v.speed,s.canvas.width,s.canvas.height,o.step);l.y=o.dir.yfunction(o.dir.x,l.x,o.dir.y,l.y,v.speed,s.canvas.width,s.canvas.height,o.step);o.bound=="back"?(l.x=l.x>s.canvas.width+h.radius+2?-h.radius:l.x<-h.radius-2?s.canvas.width+h.radius:l.x,l.y=!o.image?l.y>s.canvas.height+h.radius+2?-h.radius:l.y<-h.radius-2?s.canvas.height+h.radius:l.y:l.y>s.canvas.height+h.radius*o.image.height/o.image.width+2?-h.radius*o.image.height/o.image.width:l.y<-h.radius*o.image.height/o.image.width+2?s.canvas.height+h.radius*o.image.height/o.image.width:l.y):o.bound=="bounce"&&((l.x+h.radius>=s.canvas.width?(l.x+=-v.speed,o.dir.x=-1):l.x<=h.radius&&(l.x+=v.speed,o.dir.x=1),!o.image)?l.y+h.radius>=s.canvas.height?(l.y+=-v.speed,o.dir.y=-1):l.y<=h.radius&&(l.y+=v.speed,o.dir.y=1):l.y+h.radius*o.image.height/o.image.width>=s.canvas.height?(l.y+=-v.speed,o.dir.y=-1):l.y<=h.radius*o.image.height/o.image.width&&(l.y+=v.speed,o.dir.y=1));o.image?(s.canvas.ctx.save(),s.canvas.ctx.translate(l.x,l.y),s.canvas.ctx.globalAlpha=o.alpha,s.canvas.ctx.drawImage(o.image,-h.radius,-h.radius*o.image.height/o.image.width,h.radius*2,h.radius*2*o.image.height/o.image.width),s.canvas.ctx.restore()):(s.canvas.ctx.beginPath(),s.canvas.ctx.arc(l.x,l.y,h.radius,0,r,!1),s.canvas.ctx.fillStyle="rgba("+m.color.r+","+m.color.g+","+m.color.b+","+o.alpha+")",s.canvas.ctx.fill());o.step++};e.isFunction(s.addParticle)&&e(n).off("addParticle.particles").on("addParticle.particles",s.addParticle);e(n).trigger("addParticle",o);s.part.push(o)})},stop:function(){return this.each(function(){var t=this;t.parts.stop==!1?(t.parts.stop=!0,u(t.parts.requestid)):(t.parts.stop=!1,a.step.apply(e(t)));e.isFunction(t.parts.stateChange)&&e(t).off("stateChange.particles").on("stateChange.particles",t.parts.stateChange);e(t).trigger("stateChange",t.parts.stop==false?"playing":"stopped")})},step:function(){return this.each(function(){var t=this,n;t.parts&&t.parts.stop==!1&&(n=[],t.parts.canvas.ctx.clearRect(0,0,t.parts.canvas.width,t.parts.canvas.height),e.each(t.parts.part,function(r,s){s.update();!s.r?n.push(s):e.isFunction(t.parts.removeParticle)&&e(t).off("removeParticle.particles").on("removeParticle.particles",t.parts.removeParticle);e(t).trigger("removeParticle",i)}),t.parts&&(t.parts.part=n,t.parts.requestid=o(function(){a.step.apply(e(t))})))})},destroy:function(){return this.each(function(){var t=this;a["stop"].apply(e(t));t.parts.canvas.object.remove();delete t.parts})}};if(a[n]){return a[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return a.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.particles")}}})(jQuery,window)